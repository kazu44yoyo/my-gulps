'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SafeTransformer = undefined;

var _child_process = require('child_process');

var _child_process2 = _interopRequireDefault(_child_process);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class SafeTransformer {
  constructor(minifier) {
    this._minifier = minifier;
  }

  async transform(script) {
    let args = ['-w', script];
    let options = { maxBuffer: 10 * 1024 * 1024 };
    return new Promise((resolve, reject) => _child_process2.default.execFile(this._minifier.binary, args, options, (error, stdout) => {
      if (error) reject(error);else resolve(stdout);
    }));
  }
}
exports.SafeTransformer = SafeTransformer;